---
import "./styles.css";
---

<section class="contact-form-section">
	<div class="contact-form-container">
		<h2 class="contact-form-title">Contáctenos</h2>
		<p class="contact-form-description">
			Complete el formulario y nos pondremos en contacto con usted a la
			brevedad.
		</p>

		<form
			id="contactForm"
			class="contact-form"
		>
			<div class="form-grid">
				<label class="a-input__label">
					Nombre
					<span class="a-input__error"
						>Por favor ingrese un nombre válido</span
					>
					<input
						type="text"
						name="name"
						class="a-input"
						placeholder="Ingrese su nombre"
						required
						pattern="^[A-Za-zÁÉÍÓÚáéíóúÑñ\s]{2,50}$"
					/>
				</label>

				<label class="a-input__label">
					Email
					<span class="a-input__error"
						>Por favor ingrese un email válido</span
					>
					<input
						type="email"
						name="email"
						class="a-input"
						placeholder="Ingrese su email"
						required
					/>
				</label>

				<label class="a-input__label">
					Teléfono
					<span class="a-input__error"
						>Por favor ingrese un teléfono válido</span
					>
					<input
						type="number"
						name="phone"
						class="a-input"
						placeholder="Ingrese su teléfono"
					/>
				</label>

				<label class="a-input__label">
					Asunto
					<span class="a-input__error"
						>Por favor seleccione un asunto</span
					>
					<select
						name="subject"
						class="a-input"
						required
					>
						<option
							value=""
							disabled
							selected
							>Seleccione un asunto</option
						>
						<option value="info">Información general</option>
						<option value="classes">Consulta sobre clases</option>
						<option value="membership">Membresías</option>
						<option value="other">Otro</option>
					</select>
				</label>

				<label class="a-input__label full-width">
					Mensaje
					<span class="a-input__error"
						>El mensaje debe ser más largo</span
					>
					<textarea
						name="message"
						class="a-input"
						placeholder="Escriba su mensaje aquí"
						required
						minlength="10"
						rows="5"
					></textarea>
				</label>
			</div>

			<div class="form-actions">
				<button
					type="submit"
					class="submit-button"
				>
					<span class="button-text">Enviar mensaje</span>
					<div class="spinner"></div>
				</button>
			</div>
		</form>
	</div>
</section>

<!-- Modal de confirmación -->
<div
	id="confirmationModal"
	class="modal"
>
	<div class="modal-content">
		<span class="close-button">&times;</span>
		<div class="modal-icon">✓</div>
		<h3>¡Mensaje enviado!</h3>
		<p>Gracias por contactarnos. Responderemos a la brevedad posible.</p>
		<button class="modal-button">Aceptar</button>
	</div>
</div>

<script>
	document.addEventListener("DOMContentLoaded", () => {
		const form = document.getElementById("contactForm");
		const modal = document.getElementById("confirmationModal");
		const closeButton = document.querySelector(".close-button");
		const modalButton = document.querySelector(".modal-button");

		if (form) {
			form.addEventListener("submit", async (e) => {
				e.preventDefault();

				// Mostrar spinner
				const submitButton = form.querySelector(".submit-button");
				submitButton.classList.add("loading");

				// Simular envío (reemplazar con llamada real a API)
				try {
					// Simulación de petición
					await new Promise((resolve) => setTimeout(resolve, 1500));

					// Mostrar modal de éxito
					if (modal) modal.classList.add("show");

					// Limpiar formulario
					form.reset();
				} catch (error) {
					console.error("Error al enviar formulario:", error);
					// Aquí podrías mostrar un mensaje de error
				} finally {
					// Ocultar spinner
					submitButton.classList.remove("loading");
				}
			});
		}

		// Cerrar modal con botón X
		if (closeButton) {
			closeButton.addEventListener("click", () => {
				if (modal) modal.classList.remove("show");
			});
		}

		// Cerrar modal con botón Aceptar
		if (modalButton) {
			modalButton.addEventListener("click", () => {
				if (modal) modal.classList.remove("show");
			});
		}

		// Cerrar modal al hacer clic fuera
		window.addEventListener("click", (e) => {
			if (e.target === modal) {
				modal.classList.remove("show");
			}
		});
	});
</script>
